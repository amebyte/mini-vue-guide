<!DOCTYPE html>
<html>
    <head>
        <title>Vue3 组件库的设计和实现原理</title>
    </head>
    <body>
        <div id="app"></div>
        <script type="module">
            import { createApp } from './mini-vue3.js';
            import { App } from './App.js';
            import { RouterView } from './router-view.js';
            RouterView.install = app => app.component('RouterView', RouterView)
            const components = [
                RouterView
            ]
            const INSTALLED_KEY = Symbol('INSTALLED_KEY')
            const Element = {
                install(app) {
                    if (app[INSTALLED_KEY]) return;
                    app[INSTALLED_KEY] = true;
                    components.forEach((c) => app.use(c));
                }
            }
            const app = createApp(App)
            app.use(Element)
            app.mount(document.querySelector("#app"));
        </script>
    </body>
</html>